<!DOCTYPE html>


<html lang="en">


<head>
  <meta charset="utf-8" />
    
  <meta name="description" content="MercaPH" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    ZEMAX Notes |  MercaPH
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" href="/dist/main.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css">
  <link rel="stylesheet" href="/css/custom.css">
  
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
  
  

  

<link rel="alternate" href="/atom.xml" title="MercaPH" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-duotone-sea.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>
</html>

<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-ZEMAX-notes"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  ZEMAX Notes
</h1>
 

    </header>
     
    <div class="article-meta">
      

	<a href="/2020/11/19/ZEMAX-notes/" class="article-date">
	  Published <time datetime="2020-11-19T11:50:13.000Z" itemprop="datePublished">2020-11-19</time>
	</a>
 
	<a href="/2020/11/19/ZEMAX-notes/" class="article-date">
	  Updated <time datetime="2020-11-19T11:50:13.000Z" itemprop="dateUpdated">2020-11-19</time>
	</a>

  <div class="article-category">
    <a class="article-category-link" href="/categories/Learning-notes/">Learning notes</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> Word count:</span>
            <span class="post-count">3.3k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> Reading time≈</span>
            <span class="post-count">20 min</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <p>ZEMAX RAY-TRACING EXECRISE NOTES FROM OPTICAL CONSTRUCTION COURSE<a id="more"></a></p>
<h1 id="RT0"><a href="#RT0" class="headerlink" title="RT0"></a>RT0</h1><h3 id="Standard-Spot-Diagram"><a href="#Standard-Spot-Diagram" class="headerlink" title="Standard Spot Diagram"></a>Standard Spot Diagram</h3><p>Clicking in the ”Standard Spot Diagram” icon under the “Rays &amp; Spot” icon in the Image Quality group under the “Analyze” tab.</p>
<p>You will in this spot diagram see the position of a number of rays originating from the object at the position of the image plane. Information about the size of the spot is given, both in terms of an RMS radius and a GEO radius in the lower part of the plot. The GEO radius is the radius of a circle in the image plane in which all rays fall. The RMS radius is the root-mean-square value of the radius of the positions the rays intercept in the image plane. The latter one is the most relevant. However, it can be worth to note that since a ray tracing program only calculates the fate of certain rays, the values of these two indicators (the RMS and the GEO radii) depend on how many rays the program considers and in which “pattern” they are sent out. There is a standard set of ray patterns and number of rays that the program uses, but one can also chose other sets. You can toggle between three such patterns in the Setting window, which you open by clicking on the small downwards arrow in the upper left corner of the window of the Spot Diagram. Alter between, “Squared”, “Hexapolar”, and “Dithered”, and see the effect of this. You can also increase the number of rays. For a simple system like this, the extra time it takes to calculate more rays than the predetermined value of 6 is negligible. Therefore, use to some larger value, e.g. 24, and see the effect. Use “Dithered” and a ray density of 24. What is the RMS size of this spot (you should get an RMS spot size between 200 and 400 µm, if not, redo)</p>
<h3 id="“Solve”-routine"><a href="#“Solve”-routine" class="headerlink" title="“Solve” routine"></a>“Solve” routine</h3><p>There is also another way of finding the paraxial position of the image (instead of using the optimization routine), namely to use a “Solve” routine. To use the “Solve” routine, double-click on the small square box of the cell you just optimized (the thickness cell of row 2) and, instead of using “Variable”, chose “Marginal Ray Height”. This solve-routine will help the program to find the value of the lens-to-image distance that forces the marginal ray (the marginal ray is the ray that originates from the optical axis and passes the aperture stop/entrance pupil at a given height/pupil zone, in general at the rim of the aperture stop/entrance pupil) to arrive at a height given by the “Height” value in the image plane. We want to find the paraxial focus. Hence, the ray height should be specified to 0 (which is the default value).</p>
<p>Next to specify is which ray should be considered. You specify this by specifying a “Pupil Zone” value. We know now that the paraxial focus is the position for which rays with a virtually zero angle focus to one spot (all higher order terms become negligible). The “Pupil Zone” value refers to the (normalized) height of the beam in the entrance aperture (the STOP surface) of the system. We get rays with 0 angles, and hence the position of the paraxial focus, by specifying the Pupil Zone” value to 0. Therefore, run “Marginal Ray Height” with zeros for both the “Height” and the “Pupil Zone” values. </p>
<h3 id="RAY-RACING-USING-ARAXIAL-SURFACES"><a href="#RAY-RACING-USING-ARAXIAL-SURFACES" class="headerlink" title="RAY- RACING USING  ARAXIAL SURFACES"></a>RAY- RACING USING  ARAXIAL SURFACES</h3><p>The ZEMAX program has also a possibility to use non-spherical surfaces (as for example, adding a small conical behavior to the spherical shape that will compensate for many types of aberrations).<br>But, it has also the sometimes useful feature of introducing completely aberration-free surfaces (i.e. a surface that exactly follows theparaxial theory). These are called paraxial surfaces.</p>
<hr>
<h1 id="RT1"><a href="#RT1" class="headerlink" title="RT1"></a>RT1</h1><p>Create  a  Lens  Data  editor  that  describes  the  situation.  Start  by  making  a  lens  made out of<br>two lens surfaces, each of them of paraxial type (and each having half the  refractive  power,  i.e.,  twice  the  actual  focal  length,  i.e.  40  mm),  but,  with  no  distance  in  between.  This  is<br>convenient  when  comparisons  with  finite  thickness  lenses are going to be done later on. Select an “Entrance Aperture Diameter” of 10 mm under the  “Aperture“  tab  of  the  SYSTEM<br>EXPLORER.  Place  the  image  plane at  a  so  far  arbitrary  position  behind  the  lens,  e.g.  at  100  mm.  For  display  purposes, you can make the lens larger than the minimum size. Give the lens, for simplicity, a semi-diameter of 8 mm.</p>
<p>run  the  optimization  procedure  (do  not  forget  to  start  with  the  “Optimization Wizard”  icon  in  the  Automatic  Optimization  group  under  the  “Optimize”  tab, and use Type: “RMS”,  Criteria “Spot Radius”, and Reference “Chief Ray” as be-fore, and use 4 rings, before you run “Optimize!” in the Automatic Optimization group under the “Optimize” tab) and find out where the image plane is localized. Look also at the Layout.</p>
<h3 id="Determine-the-transverse-magnification"><a href="#Determine-the-transverse-magnification" class="headerlink" title="Determine the transverse magnification"></a>Determine the transverse magnification</h3><p>In order to determine the transverse magnification of the system, you need to place another object at a certain distance from the optical axis. Open the “Fields”   tab in the SYSTEM EXPLORER.  The  type  of  field  chosen  under “Settings”should be “Object Height”. If not set, change to this. By default, you have one field point set (termed Field 1). If you open this tab, you will see that this field point is at x = 0, and y = 0, and that it has a weight of 1.  Now you need to create another field point. Open the “Add Field” tab and set this at x = 0, and y = 10, with a weight of 1. Note that you have to click on the Enable box, be able to set this field point.</p>
<p>Remember this for the future. Every time you alter the number of field points (or the  number  of  wavelengths,  see  coming  exercises)  you  need  to  open  and  run the Merit Function Editor again.</p>
<p>the actual position of the rays from the uppermost part of the object can, for ex-ample, be found by invoking the ”Standard Spot Diagram” icon under the “Rays &amp; Spot” icon in the Image Quality group under the “Analyze” tab. You should be able  to  read  the  center  position  of  the  beams  both  at  the  object  and  the  image  plane.  The  ratio  should  give  you  the  transverse magnification. Which transverse magnification does this system have?</p>
<h3 id="Fixed-L-SIM-SOB"><a href="#Fixed-L-SIM-SOB" class="headerlink" title="Fixed L = SIM + SOB"></a>Fixed L = SIM + SOB</h3><p>In  this  case  you  need  to  optimize  an  intermediate  position  (i.e.  that  of  the  lens)  while  holding  the  object-to-image  distance  fixed.  You  can  accomplish  this  by  double  clicking  on  the  Thicknesscell  of  the  last  lens  surface  and  choose  “Position” instead of “Fixed” or “Variable” that we have used before. You can here determine the position from another given surface. Choose “From Surface:” “0” and “Length:” “160”. This implies that the image plane always will be positioned 160 mm behind the object plane. Hence, you can now optimize the position of the lens as  you  want.  Change  the  Thickness  cell  of  the  uppermost  row  to  “Variable”  so that  you  can  optimize  the  position  of  the  lens.  A  possible  starting  point  (if  you  model your lens as two surfaces) could then look like as foll.</p>
<h3 id="Add-the-magnification-constraint"><a href="#Add-the-magnification-constraint" class="headerlink" title="Add the magnification constraint"></a>Add the magnification constraint</h3><p>One  way  of  doing  this  is  to  open  the merit function(in Wizards and operand)and then add one more opti-mization condition (the magnification constraint). This you can do by adding one more line in the merit function. This line should be the first line. Click in any of the cells in the DFMS line. Press “Insert”. They you get a dummy line, with the command BLNK (for Blank) as the type. You need to exchange this to some more useful command. Click in the small squared box of this cell. You should then get a list of possible optimization operands. These you can use at any time in your ray tracing  (you  can  read  about  this  in  the  help  files).  In  this  case,  use  PMAG, since this puts a requirement on the paraxial magnification. This magnification we want to lock to -0.5. Therefore, type PMAG for the “type” of this operand (in place of BLNK). You need to give the target value of this, which thus is  -0.5. Type this in the target column. Then you need to give it a weight. Give it a weight of 1 (which is  a  standard  value).  Now  when  you  run  the  optimization,  the  program  will  both try to minimize the spot size in the image plane (or the aberrations) but also try to accomplish  a  system  with  a  paraxial  magnification  of  -0.5.  Run  the  optimization  and determine the focal length and the lens position.</p>
<hr>
<h1 id="RT2"><a href="#RT2" class="headerlink" title="RT2"></a>RT2</h1><p>Remember that in order to get the focal length of such a system (which is a parax-ial  quantity),  you  have  to  look  at  rays  that  go  close  to  the  optical  axis.  This  you  can do either by using the optimization routine for the focal length (with the radii of  curvature  of  the  first  surface  as  a  variable,  with  the  second  surface  having  the  same radius of curvature but with opposite sign, which can be done by the “Pick up”  routine, with  a  fixed  value  for  the  distance  between  the  last  surface  and  the  image plane, and with a very small entrance pupil diameter) or by using the Solve routine  for  the  marginal  ray  height  (“Marginal  Ray  Height”, 0,0) and  manually  trying various radii</p>
<h3 id="Creating-a-parallel-pencil-of-rays"><a href="#Creating-a-parallel-pencil-of-rays" class="headerlink" title="Creating a parallel pencil of rays"></a>Creating a parallel pencil of rays</h3><p>let the object have an in-finite  distance  to  the  first  surface,  which  also  is  the  “Aperture Stop” (also called the “Surface  Stop”  in ZEMAX).  If  you  want  to  see  some  parts  of  the  parallel  rays  falling in on your lens system (in the Layout window) you can add an extra non-refractive  dummy  surface  in  front  of  the  lens.  This  non-refractive  surface,  which  can serve as the entrance pupil, should not refract the rays. Hence, it should be fol-lowed by only air (no glass material). It should, however, have a certain distance to the lens. This distance can be quite arbitrary (since parallel light rays are emerg-ing from the surface) so as to create a nice layout.</p>
<p>Insert therefore a new surface directly after the object surface. (Click in any cell of surface 1 and press the “Insert” key on the keyboard.) Type a suitable number for its  thickness  in  the“Thickness”column.  Any  number  in  the  range  10  to  50  will  suffice. Make sure that the distance from the object to the first “dummy” surface is infinite. Let this time the dummy surface be the ”Aperture Stop”. You do this by double  clicking  in  the  first  cell  of  the  row,  which  reads  “1”,  (or  by  marking any cell of row 1 and then opening the “Settings” window, which you do by pressing the arrow that points down enclosed in a circle (i.e. ) and click in the box for the “Make  Surface  Stop”.  You  will  find  that  the  surface  stop  has  changed  from  the  first surface of the lens to this new fictitious surface. When you look in the Layout window, make sure you plot the optical system from surface 1 to surface 4 (see the “Settings” window).   We will come back to the importance of the” Aperture Stop”in later Ray Tracing exercises. </p>
<p align="center"><br>  <img src="/images/Aperture Stop.jpg" alt="2" width="100%" height="100%"><br></p><br>One why to find this  is  to  use  the  optimization    routine  you  used  in  a  previous  Ray  Tracing  exer-cise,  another  is “Marginal  Ray  Height”  solve  (for  the  latter,  double-click  on  the  small  square  box  of  the thickness  cell  of  the  last  surface of  the  lens  and  choose “Marginal Ray Height”)<br><p align="center"><br>  <img src="/images/marginal ray height.jpg" alt="2" width="100%" height="100%"><br></p>

<h3 id="Set-Surface-Stop"><a href="#Set-Surface-Stop" class="headerlink" title="Set Surface Stop"></a>Set Surface Stop</h3><p>Make sure that the lens is the “Surface Stop”. (If not, double-click in the first cell of the first surface of the lens, i.e. the cell that reads “Paraxial”,and then click in the “Make Surface Stop” box.</p>
<h3 id="Optimize-the-system"><a href="#Optimize-the-system" class="headerlink" title="Optimize the system"></a>Optimize the system</h3><p>When you optimize the system, do not forget to start with the “Optimization Wiz-ard”  icon  in  the  Automatic  Optimization  group  under  the  “Optimize”  tab,  and  use Type: “RMS”,  Criteria “Spot Radius”, and Reference “Chief Ray” as before, and use 4 rings, before you run “Optimize!” in the Automatic Optimization group under the “Optimize” tab</p>
<h3 id="Report"><a href="#Report" class="headerlink" title="Report"></a>Report</h3><p>You can find information about the positions of the principal planes of an optical  system  in  “Prescription  data”, which  you  find  under  the  under  the  “Re-port” icon in the Reports group under the “Analyze” tab. and thereby check that the equation you derived above is correct.</p>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><p>Open the “Cooke 40 degree field” lens (one of the example files that are supplied with  the program,  can  be  found  under  Zemax\sample\sequential\objectives)1  and look  at  the  layout  window.  This  system  shows  the  basic  design  of  a  real  Cooke .triplet. One positive lens, one negative lens (made of another glass material so as to minimize chromatic aberrations, something you will look closer to in a comingray tracing exercise) followed by one positive lens finally. You can see how light from  three  different  angels  (from  far  away,  e.g.  infinity)  propagate  through  the  system. Please hold this system in your mind when you are working with the sim-plified paraxial lenses in the exercise below (so you do not lose grip of the reality).</p>
<hr>
<h1 id="RT4"><a href="#RT4" class="headerlink" title="RT4"></a>RT4</h1><h3 id="Specify-that-the-wavelength-of-the-light"><a href="#Specify-that-the-wavelength-of-the-light" class="headerlink" title="Specify  that  the  wavelength  of  the  light"></a>Specify  that  the  wavelength  of  the  light</h3><p>Specify  that  the  wavelength  of  the  light  is  587.562 nm.  This  you  do  by  opening  the “Wavelength”tab in the SYSTEM EXPLORERand then, under “Settings” and“Preset”, select “d(0.587)”. When you have selected this as your primary wave-length,  press  the  button  “Select  Preset”  to  execute  this  choice.  You  can  see  that  you  have  selected  this  wavelength  as  your  primary  wavelength  if  the  text  in  the  next tab “Wavelength 1 (0,xxx μm, Weight = 1,000)” displays this wavelength, i.e. if it reads “Wavelength 1 (0,588 μm, Weight = 1,000)”.</p>
<h3 id="Material-catalogue"><a href="#Material-catalogue" class="headerlink" title="Material catalogue"></a>Material catalogue</h3><p>The reason for this particular wavelength to be of special importance is that it cor-responds to a yellow line in the spectrum from helium (at 587.5618 nm). The in-dex  of  refraction  at  this  wavelength  is  commonly  abbreviated dn. Find out what the actual index of refraction of BK7 is at this wavelength, i.e. determine the dn - value. (There is an extensive catalogue with many types of glasses, termed “mate-rial catalogue”, incorporated into the program that can give you a lot of useful in-formation. Remember that BK7 is a Schott glass.) </p>
<h3 id="Find-a-particular-glass"><a href="#Find-a-particular-glass" class="headerlink" title="Find  a particular  glass"></a>Find  a particular  glass</h3><p>he easiest way to find a particular  glass in this catalogue is to type BK7 in the Material column in the Lens Data editor and then mark the name of the glass be-fore you open the material catalogue. It then opens directly with information about this particular type of glass at this particular wavelength, i.e. with info about n_d. alternatively,  if  you  type  BK7  in  the  Material  column in  theLens  Data  editor, you can also find its index of refraction for the wavelength used (thus not only at 587.5618  nm)  in “Prescription  data”,  which  you  find  under  the  under  the  “Re-ports” icon in the Reports group under the “Analyze” tab. Look about half down the document. Check that you can find the value of the index of refraction at both places. </p>
<h3 id="The-RMS-spot-size-of-the-focus"><a href="#The-RMS-spot-size-of-the-focus" class="headerlink" title="The (RMS) spot size of the focus"></a>The (RMS) spot size of the focus</h3><p>The (RMS) spot size of this focus (look in the ”Standard Spot Diagram”icon  under  the  “Rays  &amp;  Spot”  icon  in  the  Image  Quality  group  under  the  “Ana-lyze” tab and use “Dithered” as “Pattern” under “Settings” and a ray density of 24)?</p>
<h3 id="Selecting-“F-d-C-visible-”"><a href="#Selecting-“F-d-C-visible-”" class="headerlink" title="Selecting “F, d, C (visible)”"></a>Selecting “F, d, C (visible)”</h3><p>Expand now the number of wavelengths you are using to 3. In the “Wavelength” tab in the SYSTEM EXPLORER you should use 486.1 nm as wavelength number 1, 587.6 nm as wavelength number 2 and 656.3 nm as wavelength number 3 (the yel-low helium line and the blue and red hydrogen Fraunhofer lines). Make the 0.5876 μm  wavelength  the  “primary”  one.  Note  that  you  can  get  all  these  three  wave-lengths  directly  by  selecting “F,  d,  C  (visible)”  under “Settings” and  “Preset”. When you have pressed“Select Preset” you should get three lines(tabs) of wave-lengths below the “Settings” tab reading“Wavelength 1 (0,486 μm, Weight = 1,000)”,<br>“Wavelength 2 (0,588 μm, Weight = 1,000)”,<br>“Wavelength 3 (0,656 μm, Weight = 1,000)”</p>
<h3 id="Select-all-wavelength"><a href="#Select-all-wavelength" class="headerlink" title="Select all wavelength"></a>Select all wavelength</h3><p>there is a “Wavelength” box in the upper right most corner in which you can specify which wavelengths you want to study. Choose “All”. You need also to choose “Wave #” in the “Color Rays By:”box.  Do  the  same  with  the  “Spot  Diagram”  window  (and  use  again  “Dithered”and  a  “Ray  Density”  of  24). You are now ready to see what happens with all the light beams in the system. </p>
<h3 id="Update-all-widows"><a href="#Update-all-widows" class="headerlink" title="Update all widows"></a>Update all widows</h3><p>(double click in them or use the fast red button with two curly arrows in theQUICK ACCESS TOOLBAR).</p>
<h3 id="Dealing-with-chromatic-aberration"><a href="#Dealing-with-chromatic-aberration" class="headerlink" title="Dealing  with  chromatic aberration."></a>Dealing  with  chromatic aberration.</h3><p>There  are  two  different  windows  that  are  of  particular  use  when  dealing  with  chromatic aberration.  The  first  one  is  called  “Focal  Shift”  and  can  be  opened  by  invoking  the  ”Chro-matic Focal Shift” icon under the “Aberrations” icon in the Image Quality group under  the  “Analyze”  tab.  This  window  shows  you  the  shift  in  focal  length  as  a  function of wavelength.<br>The  other  useful  window  is  the  “Through  Focus  Spot  Diagram”  and  can  be  opened by invoking the” Through Focus Spot Diagram” icon under the “Rays  &amp;  Spot”  icon  in  the  Image  Quality  group  under  the  “Analyze” tab. This  window  shows  you  five  different  spot  diagrams.  Adjusting  some  parameters  under  “Set-tings” (the arrow that points down enclosed in a circle,  i.e. the ) will give you a nice result. Choose a ”Ray Density” around 5 - 10 (depending on your monitor), ”Delta  Focus”  to  500  (μm),  do  not  select  “Use  Symbols”,  use  “Pattern:”  “Dith-ered”, and make sure that “Wavelength” is set to ”All”. Depending on your moni-tor, you can play around with the line thickness, it is often easiest to see this if you select the “thin” or “thinnest” line thickness (change “standard” to “thin” or “thin-nest”).<br>What you will see is how the spot diagrams look like in focus, as well as 500 and 1000 μm in front of and behind the focus. As you see in this case, the focus of the green wavelength (i.e. the one at 587 nm, the middle one in wavelength) is close to the selected image plane (i.e. in focus), the blue wavelength (486 nm) has a fo-cus  about  1  mm  in  front  of  this  focus  while  the  red  one  (656  nm)  has  its  focus  about half a millimeter behind the selected focus. This is a pictorial illustration of what the “Through Focus Spot Diagram” shows.</p>
<h3 id="Effective-focal-length-by-using-marginal-ray-angle"><a href="#Effective-focal-length-by-using-marginal-ray-angle" class="headerlink" title="Effective focal length by using marginal ray angle"></a>Effective focal length by using marginal ray angle</h3><p>Select  now  somewhat  more  suitable  thicknesses  of  the  lenses:  3  mm  for  the  first  one and 2 mm for the second one. The actual focal length will then change. Reop-timize the optical system so that you get a focal length of exactly 100 mm by let-ting  both  the  first  radius  and  the  distance  between  the  last  lens  and  the  image  plane be variable, make the first lens symmetrical, i.e. 11RR′= − (by a pick up of the  first  surface),  let  the  lenses  be  cemented,  i.e.  21RR′=,  and  use  a  “Marginal Ray Angle” solve of the radius of the last lens surface of -0.1. The “Marginal Ray Angle”  solve  is  a  useful  way  of  getting  a  certain  effective  focal  length.  A “Mar-ginal  Ray  Angle”  solve of  the  radius  of  the  last  lens  surface  of  -0.1  should  give  you  an  effective  focal  length  of  100  mm.  Spend  some  time  thinking  about  whythis is the case. What does a marginal ray angle of -0.1 imply?</p>
 
      <!-- reward -->
      
      <div id="reword-out">
        <div id="reward-btn">
          Donate
        </div>
      </div>
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>Copyright： </strong>
          
          Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        share
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://yoursite.com/2020/11/19/ZEMAX-notes/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2020/11/25/Reinstall-Record-20201121/" class="article-nav-link">
        <strong class="article-nav-caption">prev</strong>
        <div class="article-nav-title">
          
            Reinstall Record_20201121
          
        </div>
      </a>
    
    
      <a href="/2020/11/02/Jotting-0x7DB/" class="article-nav-link">
        <strong class="article-nav-caption">next</strong>
        <div class="article-nav-title">Jotting_0x7DB</div>
      </a>
    
  </nav>

   
<!-- valine评论 -->
<div id="vcomments-box">
  <div id="vcomments"></div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script>
<script>
  new Valine({
    el: "#vcomments",
    app_id: "RtpkUwFtXvmt82QeX80OhMh8-gzGzoHsz",
    app_key: "4ibEQkn78BGa03zP9zX7K50s",
    path: window.location.pathname,
    avatar: "monsterid",
    placeholder: "给我的文章加点评论吧~",
    recordIP: true,
  });
  const infoEle = document.querySelector("#vcomments .info");
  if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
    infoEle.childNodes.forEach(function (item) {
      item.parentNode.removeChild(item);
    });
  }
</script>
<style>
  #vcomments-box {
    padding: 5px 30px;
  }

  @media screen and (max-width: 800px) {
    #vcomments-box {
      padding: 5px 0px;
    }
  }

  #vcomments-box #vcomments {
    background-color: #fff;
  }

  .v .vlist .vcard .vh {
    padding-right: 20px;
  }

  .v .vlist .vcard {
    padding-left: 10px;
  }
</style>

 
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2018-2021
        <i class="ri-heart-fill heart_icon"></i> Quincy
      </li>
    </ul>
    <ul>
      <li>
        
        
        
        Powered by <a href="https://hexo.io" target="_blank">Hexo</a>
        <span class="division">|</span>
        Theme - <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></s>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1279380206&amp;web_id=1279380206'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="MercaPH"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">目录</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我吃串串呗~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<!-- Tocbot -->

<script src="/js/tocbot.min.js"></script>
<script>
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: 'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto'
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>
<script src="/dist/main.js"></script>
<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->

<script src="/js/busuanzi-2.3.pure.min.js"></script>

<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->

<link rel="stylesheet" href="/css/clipboard.css">
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>


<!-- CanvasBackground -->

<script src="/js/dz.js"></script>


    
  </div>
</body>

</html>